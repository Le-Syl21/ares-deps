sdl_name='SDL3'
sdl_version='3.4.0'

sdl_setup() {
  echo "[SDL3] downloading pre-built package"
  curl -sL -o SDL3.dmg "https://github.com/libsdl-org/SDL/releases/download/release-${sdl_version}/SDL3-${sdl_version}.dmg"
  local mount_point=$(hdiutil attach SDL3.dmg -noverify -nobrowse | grep "/Volumes/" | sed 's|.*\(/Volumes/.*\)|\1|')
  echo "SDL3 DMG mounted at: ${mount_point}"
  mkdir -p SDL
  ditto "${mount_point}/SDL3.xcframework/macos-arm64_x86_64/SDL3.framework" SDL/SDL3.framework
  ditto "${mount_point}/LICENSE.txt" SDL/LICENSE.txt
  hdiutil detach "${mount_point}"
  rm SDL3.dmg
  echo "[SDL3] downloading -- success"
}

sdl_package_source() {
  echo "[SDL3] packaging source -- skipped (pre-built)"
}

sdl_patch() {
  echo "[SDL3] patching -- skipped"
}

sdl_build() {
  echo "[SDL3] building -- skipped (pre-built)"
}

sdl_install() {
  echo "[SDL3] installing"
  ditto build_temp/SDL/SDL3.framework ares-deps/lib/SDL3.framework
  ditto build_temp/SDL/LICENSE.txt ares-deps/licenses/SDL/LICENSE.txt
  echo "[SDL3] installing -- success"
}
