sdl_name='SDL3'
sdl_version='3.4.0'

sdl_setup() {
  echo "[SDL3] downloading pre-built package"
  curl -sL -o SDL3-devel.zip "https://github.com/libsdl-org/SDL/releases/download/release-${sdl_version}/SDL3-devel-${sdl_version}-VC.zip"
  unzip -q SDL3-devel.zip
  mv SDL3-${sdl_version} SDL
  echo "[SDL3] downloading -- success"
}

sdl_package_source() {
  echo "[SDL3] packaging source -- skipped (pre-built)"
}

sdl_patch() {
  echo "[SDL3] patching -- skipped"
}

sdl_build() {
  echo "[SDL3] building -- skipped (pre-built)"
}

sdl_install() {
  echo "[SDL3] installing"
  mkdir -p ares-deps/lib
  mkdir -p ares-deps/include/SDL3
  mkdir -p ares-deps/licenses/SDL3

  if [[ $envName = windows-arm64 ]]; then
    local arch="arm64"
  else
    local arch="x64"
  fi

  cp build_temp/SDL/lib/${arch}/SDL3.dll ares-deps/lib/SDL3.dll
  cp build_temp/SDL/lib/${arch}/SDL3.lib ares-deps/lib/SDL3.lib
  cp build_temp/SDL/lib/${arch}/SDL3.pdb ares-deps/lib/SDL3.pdb
  cp -R build_temp/SDL/include/SDL3/. ares-deps/include/SDL3/
  cp build_temp/SDL/LICENSE.txt ares-deps/licenses/SDL3/LICENSE.txt

  echo "[SDL3] installing -- success"
}
